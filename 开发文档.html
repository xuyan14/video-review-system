
        <!DOCTYPE html>
        <html lang="zh-CN">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>è§†é¢‘å®¡æ ¸ç®¡ç†ç³»ç»Ÿ - å¼€å‘æ–‡æ¡£</title>
            <style>
                @media print {
                    @page {
                        size: A4;
                        margin: 2cm;
                    }
                    
                    body {
                        font-size: 12pt;
                        line-height: 1.4;
                    }
                    
                    h1 {
                        font-size: 18pt;
                        page-break-before: always;
                    }
                    
                    h1:first-child {
                        page-break-before: avoid;
                    }
                    
                    h2 {
                        font-size: 16pt;
                    }
                    
                    h3 {
                        font-size: 14pt;
                    }
                    
                    table {
                        font-size: 10pt;
                        page-break-inside: avoid;
                    }
                    
                    pre, code {
                        font-size: 9pt;
                    }
                }
                
                body {
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
                    line-height: 1.6;
                    color: #333;
                    max-width: 800px;
                    margin: 0 auto;
                    padding: 20px;
                    background-color: #fff;
                }
                
                h1, h2, h3, h4, h5, h6 {
                    color: #2c3e50;
                    margin-top: 30px;
                    margin-bottom: 15px;
                    font-weight: 600;
                }
                
                h1 {
                    font-size: 28px;
                    border-bottom: 2px solid #3498db;
                    padding-bottom: 10px;
                }
                
                h2 {
                    font-size: 24px;
                    border-bottom: 1px solid #bdc3c7;
                    padding-bottom: 8px;
                }
                
                h3 {
                    font-size: 20px;
                }
                
                h4 {
                    font-size: 18px;
                }
                
                p {
                    margin-bottom: 15px;
                    text-align: justify;
                }
                
                ul, ol {
                    margin-bottom: 15px;
                    padding-left: 30px;
                }
                
                li {
                    margin-bottom: 5px;
                }
                
                table {
                    border-collapse: collapse;
                    width: 100%;
                    margin-bottom: 20px;
                    font-size: 14px;
                }
                
                th, td {
                    border: 1px solid #ddd;
                    padding: 12px;
                    text-align: left;
                }
                
                th {
                    background-color: #f8f9fa;
                    font-weight: 600;
                    color: #2c3e50;
                }
                
                tr:nth-child(even) {
                    background-color: #f8f9fa;
                }
                
                code {
                    background-color: #f4f4f4;
                    padding: 2px 4px;
                    border-radius: 3px;
                    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
                    font-size: 13px;
                }
                
                pre {
                    background-color: #f8f9fa;
                    border: 1px solid #e9ecef;
                    border-radius: 5px;
                    padding: 15px;
                    overflow-x: auto;
                    margin-bottom: 20px;
                }
                
                pre code {
                    background-color: transparent;
                    padding: 0;
                }
                
                blockquote {
                    border-left: 4px solid #3498db;
                    margin: 20px 0;
                    padding: 10px 20px;
                    background-color: #f8f9fa;
                    font-style: italic;
                }
                
                .print-instructions {
                    background-color: #e3f2fd;
                    border: 1px solid #2196f3;
                    border-radius: 5px;
                    padding: 15px;
                    margin-bottom: 20px;
                    font-size: 14px;
                }
                
                .print-instructions h3 {
                    margin-top: 0;
                    color: #1976d2;
                }
                
                .print-instructions ul {
                    margin-bottom: 0;
                }
            </style>
        </head>
        <body>
            <div class="print-instructions">
                <h3>ğŸ“„ æ‰“å°ä¸ºPDFè¯´æ˜</h3>
                <ul>
                    <li>æŒ‰ <strong>Ctrl+P</strong> (Windows) æˆ– <strong>Cmd+P</strong> (Mac) æ‰“å¼€æ‰“å°å¯¹è¯æ¡†</li>
                    <li>é€‰æ‹©"å¦å­˜ä¸ºPDF"æˆ–"ä¿å­˜ä¸ºPDF"</li>
                    <li>ç¡®ä¿é¡µé¢è®¾ç½®ä¸ºA4çº¸å¼ ï¼Œè¾¹è·ä¸º2cm</li>
                    <li>ç‚¹å‡»"ä¿å­˜"å³å¯ç”ŸæˆPDFæ–‡ä»¶</li>
                </ul>
            </div>
            
            <h1 id="-">è§†é¢‘å®¡æ ¸ç®¡ç†ç³»ç»Ÿ - å¼€å‘æ–‡æ¡£</h1>
<h2 id="1">1. æŠ€æœ¯æ¶æ„</h2>
<h3 id="11">1.1 æ•´ä½“æ¶æ„</h3>
<pre class="codehilite"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (HTML)   â”‚    â”‚   åç«¯ (Flask)  â”‚    â”‚   æ•°æ®åº“ (SQLite)â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  - Bootstrap 5  â”‚â—„â”€â”€â–ºâ”‚  - Python Flask â”‚â—„â”€â”€â–ºâ”‚  - SQLite3      â”‚
â”‚  - JavaScript   â”‚    â”‚  - RESTful API  â”‚    â”‚  - å…³ç³»å‹æ•°æ®åº“  â”‚
â”‚  - CSS3         â”‚    â”‚  - æ–‡ä»¶ä¸Šä¼      â”‚    â”‚  - äº‹åŠ¡æ”¯æŒ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<h3 id="12">1.2 æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šHTML5 + CSS3 + JavaScript + Bootstrap 5</li>
<li><strong>åç«¯</strong>ï¼šPython 3.9+ + Flask + SQLite3</li>
<li><strong>æ•°æ®åº“</strong>ï¼šSQLite3</li>
<li><strong>æ–‡ä»¶å­˜å‚¨</strong>ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</li>
<li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šPythonè™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<h2 id="2">2. é¡¹ç›®ç»“æ„</h2>
<pre class="codehilite"><code>video_review_system/
â”œâ”€â”€ start_simple.py              # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html              # å‰ç«¯é¡µé¢æ¨¡æ¿
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–åŒ…
â”œâ”€â”€ video_review.db             # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ screenshots/                # æˆªå›¾æ–‡ä»¶å­˜å‚¨ç›®å½•
â”œâ”€â”€ uploads/                    # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ç›®å½•
â”œâ”€â”€ init_database.py            # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ import_excel_data.py        # Excelæ•°æ®å¯¼å…¥è„šæœ¬
â”œâ”€â”€ add_artwork_video_field.py  # æ•°æ®åº“å­—æ®µæ·»åŠ è„šæœ¬
â”œâ”€â”€ add_screenshots_table.py    # æˆªå›¾è¡¨åˆ›å»ºè„šæœ¬
â””â”€â”€ å·¥ä½œç°¿3.xlsx               # åŸå§‹Excelæ•°æ®æ–‡ä»¶
</code></pre>

<h2 id="3">3. æ•°æ®åº“è®¾è®¡</h2>
<h3 id="31">3.1 è¡¨ç»“æ„</h3>
<h4 id="311-video_projects">3.1.1 video_projects è¡¨</h4>
<pre class="codehilite"><code class="language-sql">CREATE TABLE video_projects (
    id TEXT PRIMARY KEY,
    video_name TEXT NOT NULL,
    video_url TEXT NOT NULL,
    artwork_video_url TEXT,
    brand TEXT,
    category TEXT,
    material_name TEXT,
    material_price REAL,
    selling_points TEXT,
    product_id TEXT,
    product_link TEXT,
    selection_date TEXT,
    provide_date TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
</code></pre>

<h4 id="312-workflow_status">3.1.2 workflow_status è¡¨</h4>
<pre class="codehilite"><code class="language-sql">CREATE TABLE workflow_status (
    id TEXT PRIMARY KEY,
    project_id TEXT NOT NULL,
    current_stage TEXT,
    completion_status TEXT,
    annotation_reviewer TEXT,
    ued_reviewer TEXT,
    artwork_person TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (project_id) REFERENCES video_projects (id)
);
</code></pre>

<h4 id="313-review_records">3.1.3 review_records è¡¨</h4>
<pre class="codehilite"><code class="language-sql">CREATE TABLE review_records (
    id TEXT PRIMARY KEY,
    project_id TEXT NOT NULL,
    review_type TEXT NOT NULL,
    reviewer_name TEXT,
    review_status TEXT,
    problem_description TEXT,
    review_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (project_id) REFERENCES video_projects (id)
);
</code></pre>

<h4 id="314-screenshots">3.1.4 screenshots è¡¨</h4>
<pre class="codehilite"><code class="language-sql">CREATE TABLE screenshots (
    id TEXT PRIMARY KEY,
    project_id TEXT NOT NULL,
    review_type TEXT NOT NULL,
    screenshot_path TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (project_id) REFERENCES video_projects (id)
);
</code></pre>

<h3 id="32">3.2 æ•°æ®åº“å…³ç³»</h3>
<ul>
<li><code>video_projects</code> â†â†’ <code>workflow_status</code> (1:1)</li>
<li><code>video_projects</code> â†â†’ <code>review_records</code> (1:N)</li>
<li><code>video_projects</code> â†â†’ <code>screenshots</code> (1:N)</li>
</ul>
<h2 id="4-api">4. APIæ¥å£è®¾è®¡</h2>
<h3 id="41">4.1 é¡¹ç›®ç›¸å…³æ¥å£</h3>
<h4 id="get-apiprojects">GET /api/projects</h4>
<p>è·å–é¡¹ç›®åˆ—è¡¨</p>
<pre class="codehilite"><code class="language-json">{
  &quot;query_params&quot;: {
    &quot;status&quot;: &quot;string&quot;,
    &quot;stage&quot;: &quot;string&quot;, 
    &quot;reviewer&quot;: &quot;string&quot;,
    &quot;brand&quot;: &quot;string&quot;,
    &quot;provideDate&quot;: &quot;string&quot;,
    &quot;productId&quot;: &quot;string&quot;,
    &quot;annotationStatus&quot;: &quot;string&quot;,
    &quot;uedStatus&quot;: &quot;string&quot;
  },
  &quot;response&quot;: [
    {
      &quot;id&quot;: &quot;string&quot;,
      &quot;video_name&quot;: &quot;string&quot;,
      &quot;video_url&quot;: &quot;string&quot;,
      &quot;artwork_video_url&quot;: &quot;string&quot;,
      &quot;annotation_reviewer&quot;: &quot;string&quot;,
      &quot;ued_reviewer&quot;: &quot;string&quot;,
      &quot;annotation_status&quot;: &quot;string&quot;,
      &quot;ued_status&quot;: &quot;string&quot;,
      &quot;annotation_screenshots&quot;: [],
      &quot;ued_screenshots&quot;: []
    }
  ]
}
</code></pre>

<h4 id="get-apistatistics">GET /api/statistics</h4>
<p>è·å–ç»Ÿè®¡æ•°æ®</p>
<pre class="codehilite"><code class="language-json">{
  &quot;response&quot;: {
    &quot;total&quot;: 146,
    &quot;pending_annotation&quot;: 10,
    &quot;pending_artwork&quot;: 40,
    &quot;pending_ued&quot;: 0,
    &quot;completed&quot;: 3,
    &quot;failed&quot;: 93
  }
}
</code></pre>

<h3 id="42">4.2 å®¡æ ¸ç›¸å…³æ¥å£</h3>
<h4 id="post-apiupdate-reviewer">POST /api/update-reviewer</h4>
<p>æ›´æ–°å®¡æ ¸å‘˜</p>
<pre class="codehilite"><code class="language-json">{
  &quot;request&quot;: {
    &quot;videoId&quot;: &quot;string&quot;,
    &quot;reviewer&quot;: &quot;string&quot;
  },
  &quot;response&quot;: {
    &quot;message&quot;: &quot;å®¡æ ¸å‘˜å·²æ›´æ–°&quot;
  }
}
</code></pre>

<h4 id="post-apitoggle-status">POST /api/toggle-status</h4>
<p>åˆ‡æ¢å®¡æ ¸çŠ¶æ€</p>
<pre class="codehilite"><code class="language-json">{
  &quot;request&quot;: {
    &quot;videoId&quot;: &quot;string&quot;,
    &quot;type&quot;: &quot;annotation|ued&quot;,
    &quot;status&quot;: &quot;å¯ç”¨|ä¸å¯ç”¨&quot;,
    &quot;reviewer&quot;: &quot;string&quot;,
    &quot;comment&quot;: &quot;string&quot;
  },
  &quot;response&quot;: {
    &quot;message&quot;: &quot;çŠ¶æ€å·²æ›´æ–°&quot;
  }
}
</code></pre>

<h4 id="post-apisave-screenshot">POST /api/save-screenshot</h4>
<p>ä¿å­˜æˆªå›¾</p>
<pre class="codehilite"><code class="language-json">{
  &quot;request&quot;: {
    &quot;videoId&quot;: &quot;string&quot;,
    &quot;reviewType&quot;: &quot;annotation|ued&quot;,
    &quot;screenshotData&quot;: &quot;base64_string&quot;
  },
  &quot;response&quot;: {
    &quot;message&quot;: &quot;æˆªå›¾ä¿å­˜æˆåŠŸ&quot;,
    &quot;screenshot_path&quot;: &quot;string&quot;
  }
}
</code></pre>

<h3 id="43">4.3 æ–‡ä»¶ç›¸å…³æ¥å£</h3>
<h4 id="post-apiupload-artwork-video">POST /api/upload-artwork-video</h4>
<p>ä¸Šä¼ åŠ è‰ºæœ¯å­—è§†é¢‘</p>
<pre class="codehilite"><code class="language-json">{
  &quot;request&quot;: &quot;multipart/form-data&quot;,
  &quot;fields&quot;: {
    &quot;videoFile&quot;: &quot;file&quot;,
    &quot;videoId&quot;: &quot;string&quot;
  },
  &quot;response&quot;: {
    &quot;message&quot;: &quot;è§†é¢‘ä¸Šä¼ æˆåŠŸ&quot;,
    &quot;video_url&quot;: &quot;string&quot;
  }
}
</code></pre>

<h4 id="get-uploads">GET /uploads/<filename></h4>
<p>è·å–ä¸Šä¼ æ–‡ä»¶</p>
<h4 id="get-screenshots">GET /screenshots/<filename></h4>
<p>è·å–æˆªå›¾æ–‡ä»¶</p>
<h2 id="5">5. å‰ç«¯æ¶æ„</h2>
<h3 id="51">5.1 é¡µé¢ç»“æ„</h3>
<pre class="codehilite"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;è§†é¢‘å®¡æ ¸ç®¡ç†ç³»ç»Ÿ&lt;/title&gt;
    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- ç­›é€‰åŒºåŸŸ --&gt;
    &lt;div class=&quot;filter-section&quot;&gt;...&lt;/div&gt;

    &lt;!-- æ“ä½œæŒ‰é’®åŒºåŸŸ --&gt;
    &lt;div class=&quot;action-section&quot;&gt;...&lt;/div&gt;

    &lt;!-- æ•°æ®è¡¨æ ¼åŒºåŸŸ --&gt;
    &lt;div class=&quot;table-section&quot;&gt;...&lt;/div&gt;

    &lt;!-- å®¡æ ¸æ¨¡æ€æ¡† --&gt;
    &lt;div class=&quot;modal&quot; id=&quot;reviewModal&quot;&gt;...&lt;/div&gt;

    &lt;!-- ä¸Šä¼ æ¨¡æ€æ¡† --&gt;
    &lt;div class=&quot;modal&quot; id=&quot;uploadModal&quot;&gt;...&lt;/div&gt;

    &lt;!-- åˆ—è®¾ç½®æ¨¡æ€æ¡† --&gt;
    &lt;div class=&quot;modal&quot; id=&quot;columnSettingsModal&quot;&gt;...&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h3 id="52-javascript">5.2 JavaScriptæ¨¡å—</h3>
<h4 id="521">5.2.1 æ•°æ®ç®¡ç†æ¨¡å—</h4>
<pre class="codehilite"><code class="language-javascript">// å…¨å±€å˜é‡
let currentVideos = [];
let columnSettings = {
    available: [...],
    selected: [...]
};

// æ•°æ®åŠ è½½
async function loadVideos() { ... }
async function loadStatistics() { ... }
</code></pre>

<h4 id="522">5.2.2 è¡¨æ ¼æ¸²æŸ“æ¨¡å—</h4>
<pre class="codehilite"><code class="language-javascript">// è¡¨æ ¼æ¸²æŸ“
function renderVideosTable() { ... }
function renderTableHeader() { ... }
function getColumnContent(video, columnId) { ... }
</code></pre>

<h4 id="523">5.2.3 å®¡æ ¸åŠŸèƒ½æ¨¡å—</h4>
<pre class="codehilite"><code class="language-javascript">// å®¡æ ¸ç›¸å…³
function openReviewModal(videoId, videoType) { ... }
function captureFrame() { ... }
async function submitReview() { ... }
</code></pre>

<h4 id="524">5.2.4 æ–‡ä»¶ä¸Šä¼ æ¨¡å—</h4>
<pre class="codehilite"><code class="language-javascript">// æ–‡ä»¶ä¸Šä¼ 
function openUploadModal(videoId) { ... }
async function uploadArtworkVideo() { ... }
</code></pre>

<h2 id="6">6. æ ¸å¿ƒåŠŸèƒ½å®ç°</h2>
<h3 id="61">6.1 å®¡æ ¸å·¥ä½œæµå®ç°</h3>
<h4 id="611">6.1.1 çŠ¶æ€åˆ¤æ–­é€»è¾‘</h4>
<pre class="codehilite"><code class="language-javascript">function getStageIndicator(video) {
    const annotationStatus = video.annotation_status;
    const uedStatus = video.ued_status;
    const hasArtworkVideo = video.artwork_video_url &amp;&amp; video.artwork_video_url !== '';

    if (!annotationStatus || annotationStatus === 'æœªå®¡æ ¸') {
        return 'å¾…æ ‡æ³¨å®¡æ ¸';
    } else if (annotationStatus === 'ä¸å¯ç”¨') {
        return 'æ ‡æ³¨å®¡æ ¸ä¸é€šè¿‡';
    } else if (annotationStatus === 'å¯ç”¨' &amp;&amp; !hasArtworkVideo) {
        return 'å¾…åŠ è‰ºæœ¯å­—';
    } else if (annotationStatus === 'å¯ç”¨' &amp;&amp; hasArtworkVideo &amp;&amp; (!uedStatus || uedStatus === 'æœªå®¡æ ¸')) {
        return 'å¾…UEDå®¡æ ¸';
    } else if (uedStatus === 'å¯ç”¨') {
        return 'UEDå®¡æ ¸é€šè¿‡';
    } else if (uedStatus === 'ä¸å¯ç”¨') {
        return 'UEDå®¡æ ¸ä¸é€šè¿‡';
    }
}
</code></pre>

<h4 id="612">6.1.2 åŠ è‰ºæœ¯å­—è§†é¢‘æ˜¾ç¤ºé€»è¾‘</h4>
<pre class="codehilite"><code class="language-javascript">function getArtworkVideo(video) {
    const annotationStatus = video.annotation_status;

    // å¦‚æœæ ‡æ³¨å®¡æ ¸çŠ¶æ€ä¸º&quot;ä¸å¯ç”¨&quot;ï¼Œåˆ™æ˜¾ç¤º&quot;--&quot;
    if (annotationStatus === 'ä¸å¯ç”¨') {
        return '&lt;span class=&quot;text-muted&quot;&gt;--&lt;/span&gt;';
    }

    // å¦‚æœæ ‡æ³¨å®¡æ ¸çŠ¶æ€ä¸º&quot;æœªå®¡æ ¸&quot;æˆ–nullï¼Œæ˜¾ç¤º&quot;--&quot;ï¼ˆä¸æ˜¾ç¤ºä¸Šä¼ æŒ‰é’®ï¼‰
    if (annotationStatus === 'æœªå®¡æ ¸' || !annotationStatus || annotationStatus === null) {
        return '&lt;span class=&quot;text-muted&quot;&gt;--&lt;/span&gt;';
    }

    // å¦‚æœå·²ä¸Šä¼ åŠ è‰ºæœ¯å­—è§†é¢‘ï¼Œæ˜¾ç¤ºæ’­æ”¾æŒ‰é’®
    if (video.artwork_video_url &amp;&amp; video.artwork_video_url !== '') {
        return '&lt;i class=&quot;fas fa-eye text-primary&quot; onclick=&quot;openReviewModal(\'' + video.id + '\', \'artwork\')&quot;&gt;&lt;/i&gt;';
    }

    // å¦åˆ™æ˜¾ç¤ºä¸Šä¼ æŒ‰é’®
    return '&lt;button class=&quot;btn btn-sm btn-outline-primary&quot; onclick=&quot;openUploadModal(\'' + video.id + '\')&quot;&gt;ä¸Šä¼ è§†é¢‘&lt;/button&gt;';
}
</code></pre>

<h3 id="62">6.2 æˆªå›¾åŠŸèƒ½å®ç°</h3>
<h4 id="621">6.2.1 å‰ç«¯æˆªå›¾é€»è¾‘</h4>
<pre class="codehilite"><code class="language-javascript">function captureFrame() {
    const video = document.getElementById('reviewVideo');
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    const imageData = canvas.toDataURL('image/png');
    addScreenshot('screenshot_' + Date.now(), imageData);
}
</code></pre>

<h4 id="622">6.2.2 åç«¯æˆªå›¾ä¿å­˜</h4>
<pre class="codehilite"><code class="language-python">@app.route('/api/save-screenshot', methods=['POST'])
def save_screenshot():
    video_id = request.form.get('videoId')
    review_type = request.form.get('reviewType')
    screenshot_data = request.form.get('screenshotData')

    # ç”Ÿæˆæ–‡ä»¶å
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    filename = f&quot;screenshot_{video_id}_{review_type}_{timestamp}.png&quot;
    file_path = os.path.join('screenshots', filename)

    # ä¿å­˜base64å›¾ç‰‡
    if screenshot_data.startswith('data:image'):
        screenshot_data = screenshot_data.split(',')[1]

    with open(file_path, 'wb') as f:
        f.write(base64.b64decode(screenshot_data))

    # ä¿å­˜åˆ°æ•°æ®åº“
    conn = get_db_connection()
    conn.execute(&quot;&quot;&quot;
        INSERT INTO screenshots (id, project_id, review_type, screenshot_path, created_at)
        VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP)
    &quot;&quot;&quot;, (str(uuid.uuid4()), video_id, review_type, f&quot;/screenshots/{filename}&quot;))
    conn.commit()
    conn.close()

    return jsonify({'message': 'æˆªå›¾ä¿å­˜æˆåŠŸ'})
</code></pre>

<h3 id="63">6.3 åˆ—è®¾ç½®åŠŸèƒ½å®ç°</h3>
<h4 id="631">6.3.1 åˆ—é…ç½®ç®¡ç†</h4>
<pre class="codehilite"><code class="language-javascript">const columnSettings = {
    available: [
        { id: 'checkbox', name: 'é€‰æ‹©', required: true },
        { id: 'material_info', name: 'ç´ æä¿¡æ¯', required: true },
        { id: 'brand', name: 'å“ç‰Œä¿¡æ¯', required: false },
        { id: 'category', name: 'å“ç±»', required: false },
        { id: 'product_info', name: 'å•†å“ä¿¡æ¯', required: false },
        { id: 'video_dates', name: 'è§†é¢‘æ—¥æœŸ', required: false },
        { id: 'original_video', name: 'åŸå§‹ç”Ÿäº§è§†é¢‘', required: true },
        { id: 'artwork_video', name: 'åŠ è‰ºæœ¯å­—è§†é¢‘', required: true },
        { id: 'reviewer', name: 'å®¡æ ¸å‘˜', required: true },
        { id: 'annotation_status', name: 'æ ‡æ³¨éªŒæ”¶çŠ¶æ€', required: true },
        { id: 'artwork_person', name: 'åŠ è‰ºæœ¯å­—äººå‘˜', required: true },
        { id: 'ued_status', name: 'UEDéªŒæ”¶çŠ¶æ€', required: true },
        { id: 'current_stage', name: 'å½“å‰é˜¶æ®µ', required: true },
        { id: 'annotation_comment', name: 'æ ‡æ³¨å®¡æ ¸æ„è§', required: false },
        { id: 'annotation_screenshots', name: 'æ ‡æ³¨å®¡æ ¸æˆªå›¾', required: false },
        { id: 'ued_comment', name: 'UEDå®¡æ ¸æ„è§', required: false },
        { id: 'ued_screenshots', name: 'UEDå®¡æ ¸æˆªå›¾', required: false },
        { id: 'production_details', name: 'ç”Ÿäº§è¯¦æƒ…', required: false }
    ],
    selected: ['checkbox', 'material_info', 'brand', 'category', 'product_info', 'video_dates', 'original_video', 'artwork_video', 'reviewer', 'annotation_status', 'artwork_person', 'ued_status', 'current_stage']
};
</code></pre>

<h4 id="632">6.3.2 åŠ¨æ€è¡¨æ ¼æ¸²æŸ“</h4>
<pre class="codehilite"><code class="language-javascript">function renderVideosTable() {
    renderTableHeader();

    const tbody = document.getElementById('videosTable');
    tbody.innerHTML = '';

    currentVideos.forEach(video =&gt; {
        const row = document.createElement('tr');
        row.dataset.videoId = video.id;

        columnSettings.selected.forEach(columnId =&gt; {
            const cell = document.createElement('td');
            cell.innerHTML = getColumnContent(video, columnId);
            row.appendChild(cell);
        });

        tbody.appendChild(row);
    });
}
</code></pre>

<h2 id="7">7. éƒ¨ç½²è¯´æ˜</h2>
<h3 id="71">7.1 ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li>Python 3.9+</li>
<li>SQLite3</li>
<li>ç°ä»£æµè§ˆå™¨ï¼ˆChrome 80+, Firefox 75+, Safari 13+, Edge 80+ï¼‰</li>
</ul>
<h3 id="72">7.2 å®‰è£…æ­¥éª¤</h3>
<h4 id="721">7.2.1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h4>
<pre class="codehilite"><code class="language-bash">python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate     # Windows
</code></pre>

<h4 id="722">7.2.2 å®‰è£…ä¾èµ–</h4>
<pre class="codehilite"><code class="language-bash">pip install -r requirements.txt
</code></pre>

<h4 id="723">7.2.3 åˆå§‹åŒ–æ•°æ®åº“</h4>
<pre class="codehilite"><code class="language-bash">python init_database.py
python import_excel_data.py
python add_artwork_video_field.py
python add_screenshots_table.py
</code></pre>

<h4 id="724">7.2.4 å¯åŠ¨åº”ç”¨</h4>
<pre class="codehilite"><code class="language-bash">python start_simple.py
</code></pre>

<h3 id="73">7.3 é…ç½®è¯´æ˜</h3>
<h4 id="731">7.3.1 æ•°æ®åº“é…ç½®</h4>
<ul>
<li>æ•°æ®åº“æ–‡ä»¶ï¼š<code>video_review.db</code></li>
<li>è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„</li>
<li>æ”¯æŒäº‹åŠ¡æ“ä½œ</li>
</ul>
<h4 id="732">7.3.2 æ–‡ä»¶å­˜å‚¨é…ç½®</h4>
<ul>
<li>æˆªå›¾å­˜å‚¨ï¼š<code>screenshots/</code> ç›®å½•</li>
<li>è§†é¢‘ä¸Šä¼ ï¼š<code>uploads/</code> ç›®å½•</li>
<li>æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ </li>
</ul>
<h4 id="733">7.3.3 æœåŠ¡å™¨é…ç½®</h4>
<ul>
<li>é»˜è®¤ç«¯å£ï¼š3000</li>
<li>è°ƒè¯•æ¨¡å¼ï¼šå¼€å¯</li>
<li>è‡ªåŠ¨é‡è½½ï¼šå¼€å¯</li>
</ul>
<h2 id="8">8. å¼€å‘è§„èŒƒ</h2>
<h3 id="81">8.1 ä»£ç è§„èŒƒ</h3>
<ul>
<li>Pythonä»£ç éµå¾ªPEP 8è§„èŒƒ</li>
<li>JavaScriptä»£ç ä½¿ç”¨ES6+è¯­æ³•</li>
<li>HTMLä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾</li>
<li>CSSä½¿ç”¨Bootstrap 5æ¡†æ¶</li>
</ul>
<h3 id="82">8.2 å‘½åè§„èŒƒ</h3>
<ul>
<li>æ•°æ®åº“è¡¨åï¼šä¸‹åˆ’çº¿å‘½åæ³•ï¼ˆsnake_caseï¼‰</li>
<li>å˜é‡åï¼šé©¼å³°å‘½åæ³•ï¼ˆcamelCaseï¼‰</li>
<li>å‡½æ•°åï¼šåŠ¨è¯å¼€å¤´ï¼Œæè¿°æ€§å‘½å</li>
<li>æ–‡ä»¶åï¼šä¸‹åˆ’çº¿å‘½åæ³•ï¼ˆsnake_caseï¼‰</li>
</ul>
<h3 id="83">8.3 æ³¨é‡Šè§„èŒƒ</h3>
<ul>
<li>å‡½æ•°æ³¨é‡Šï¼šè¯´æ˜åŠŸèƒ½ã€å‚æ•°ã€è¿”å›å€¼</li>
<li>å¤æ‚é€»è¾‘æ³¨é‡Šï¼šè§£é‡Šä¸šåŠ¡é€»è¾‘</li>
<li>APIæ¥å£æ³¨é‡Šï¼šè¯´æ˜è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼</li>
</ul>
<h2 id="9">9. æµ‹è¯•è¯´æ˜</h2>
<h3 id="91">9.1 åŠŸèƒ½æµ‹è¯•</h3>
<ul>
<li>è§†é¢‘åˆ—è¡¨åŠ è½½æµ‹è¯•</li>
<li>å®¡æ ¸æµç¨‹æµ‹è¯•</li>
<li>æ–‡ä»¶ä¸Šä¼ æµ‹è¯•</li>
<li>æˆªå›¾åŠŸèƒ½æµ‹è¯•</li>
</ul>
<h3 id="92">9.2 æ€§èƒ½æµ‹è¯•</h3>
<ul>
<li>é¡µé¢åŠ è½½æ€§èƒ½æµ‹è¯•</li>
<li>æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½æµ‹è¯•</li>
<li>æ–‡ä»¶ä¸Šä¼ æ€§èƒ½æµ‹è¯•</li>
</ul>
<h3 id="93">9.3 å…¼å®¹æ€§æµ‹è¯•</h3>
<ul>
<li>æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•</li>
<li>è®¾å¤‡å…¼å®¹æ€§æµ‹è¯•</li>
<li>åˆ†è¾¨ç‡é€‚é…æµ‹è¯•</li>
</ul>
<h2 id="10">10. ç»´æŠ¤è¯´æ˜</h2>
<h3 id="101">10.1 æ—¥å¿—ç®¡ç†</h3>
<ul>
<li>åº”ç”¨æ—¥å¿—ï¼šFlaskå†…ç½®æ—¥å¿—</li>
<li>é”™è¯¯æ—¥å¿—ï¼šå¼‚å¸¸æ•è·å’Œè®°å½•</li>
<li>æ“ä½œæ—¥å¿—ï¼šç”¨æˆ·æ“ä½œè®°å½•</li>
</ul>
<h3 id="102">10.2 æ•°æ®å¤‡ä»½</h3>
<ul>
<li>æ•°æ®åº“å¤‡ä»½ï¼šå®šæœŸå¤‡ä»½SQLiteæ–‡ä»¶</li>
<li>æ–‡ä»¶å¤‡ä»½ï¼šå®šæœŸå¤‡ä»½ä¸Šä¼ æ–‡ä»¶</li>
<li>é…ç½®å¤‡ä»½ï¼šå¤‡ä»½ç³»ç»Ÿé…ç½®æ–‡ä»¶</li>
</ul>
<h3 id="103">10.3 æ€§èƒ½ç›‘æ§</h3>
<ul>
<li>å“åº”æ—¶é—´ç›‘æ§</li>
<li>å†…å­˜ä½¿ç”¨ç›‘æ§</li>
<li>ç£ç›˜ç©ºé—´ç›‘æ§</li>
</ul>
<h2 id="11_1">11. æ‰©å±•å¼€å‘</h2>
<h3 id="111">11.1 åŠŸèƒ½æ‰©å±•</h3>
<ul>
<li>æ”¯æŒæ›´å¤šå®¡æ ¸ç±»å‹</li>
<li>æ”¯æŒè‡ªå®šä¹‰å®¡æ ¸æµç¨‹</li>
<li>æ”¯æŒæ‰¹é‡æ“ä½œä¼˜åŒ–</li>
</ul>
<h3 id="112">11.2 æŠ€æœ¯å‡çº§</h3>
<ul>
<li>æ•°æ®åº“å‡çº§ï¼ˆPostgreSQL/MySQLï¼‰</li>
<li>ç¼“å­˜ç³»ç»Ÿé›†æˆï¼ˆRedisï¼‰</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—é›†æˆï¼ˆCeleryï¼‰</li>
</ul>
<h3 id="113">11.3 éƒ¨ç½²ä¼˜åŒ–</h3>
<ul>
<li>Dockerå®¹å™¨åŒ–éƒ¨ç½²</li>
<li>Nginxåå‘ä»£ç†</li>
<li>è´Ÿè½½å‡è¡¡é…ç½®</li>
</ul>
        </body>
        </html>
        